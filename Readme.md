# LEGO Storage Mapper

**LEGO Storage Mapper** — это инструмент для управления коллекцией LEGO деталей через интерактивные кассетницы, коробки и кучи.  
Проект разрабатывается как статическое приложение (HTML + CSS + JS без фреймворков), развёртываемое на GitHub Pages.

## Возможности (планируемые)
- Отображение кассетниц и коробок в виде таблиц с поддержкой объединённых ячеек и разделителей.
- Поддержка «куч» (pile) для временного хранения деталей и быстрого распределения по кассетницам.
- Привязка деталей LEGO: ID, количество, цвет (в том числе мультиколор).
- **Карта допустимых цветов** — строгая валидация комбинаций деталь-цвет на основе официальных данных BrickLink.
- Drag&Drop и split-view для распределения деталей между контейнерами.
- Выявление дубликатов деталей (по partId или по partId+color).
- Экспорт/импорт базы в JSON и CSV.
- Импорт из BrickLink/Rebrickable (CSV/XML) с автоматической конвертацией в LCX формат.
- Поддержка разных источников изображений деталей (BrickLink, Rebrickable).
- Хранение данных локально (IndexedDB/LocalStorage) с возможностью переноса на удалённые сервисы (например, Firebase).

## Текущий статус
- MVP: создание контейнеров (cabinet/box/pile), базовое редактирование ячеек, мультиколор, экспорт/импорт JSON.
- **Новое**: Полная поддержка карты допустимых цветов BrickLink с автоматической валидацией.
- Разработка ведётся итеративно, см. [дорожную карту](docs/09_Roadmap.md).

## Работа с данными BrickLink

Проект включает полный пайплайн обработки данных BrickLink:

### 1. Скачивание данных
```bash
cd scripts
python bricklink_python_fetcher.py
```
Скачивает TSV файлы с BrickLink (Part & Color Codes, Colors, Parts, Categories).

### 2. Конвертация в LCX
```bash
python tsv_to_lcx_converter.py bricklink_data/ -o bricklink-catalog.lcx.json.gz
```
Преобразует TSV данные в LCX-Tabular формат согласно [спецификации](docs/15_Part_Color_Map_Spec.md).

### 3. Валидация данных
```bash
python validate_part_colors.py bricklink-catalog.lcx.json.gz
```
Проверяет качество и корректность данных.

### 4. Использование в приложении
LCX файл автоматически загружается в IndexedDB и используется для:
- Валидации комбинаций деталь-цвет
- Поиска доступных цветов для деталей
- Проверки корректности введенных данных

Подробнее см. [документацию скриптов](scripts/README.md).


